(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2413:function(e,t,r){Promise.resolve().then(r.bind(r,5998))},5441:function(e,t,r){"use strict";r.d(t,{Ak:function(){return c},_5:function(){return i},vr:function(){return o},xJ:function(){return n}});var a=r(8472);let s="http://13.201.88.151:8000",o=async(e,t)=>{try{return(await a.Z.post("".concat(s,"/task"),e,{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){var r,o;throw console.error("Create task error:",e),Error((null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.message)||"Create task failed")}},n=async(e,t)=>{try{return(await a.Z.put("".concat(s,"/task/").concat(e),t)).data}catch(e){var r,o;throw console.error("Update task error:",e),Error((null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.message)||"Update task failed")}},c=async e=>{try{return(await a.Z.get("".concat(s,"/task"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){var t,r;throw console.error("Get tasks error:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Get tasks failed")}},i=async e=>{try{await a.Z.delete("".concat(s,"/task/").concat(e))}catch(e){var t,r;throw console.error("Delete task error:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Delete task failed")}}},7918:function(e,t,r){"use strict";r.d(t,{IU:function(){return o},et:function(){return c},kS:function(){return i},x4:function(){return n}});var a=r(8472);let s="http://13.201.88.151:8000",o=async e=>{try{return(await a.Z.post("".concat(s,"/user/create"),e)).data}catch(e){throw Error(e.response.data.message)}},n=async e=>{try{return(await a.Z.post("".concat(s,"/user/login"),e)).data}catch(e){throw Error(e.response.data.message)}},c=async e=>{try{return(await a.Z.get("".concat(s,"/user/profile"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){throw Error(e.response.data.message)}},i=async e=>{try{await a.Z.get("".concat(s,"/user/logout"),{headers:{Authorization:"Bearer ".concat(e)}})}catch(e){if(a.Z.isAxiosError(e)&&e.response)throw Error(e.response.data.message);throw Error("An unexpected error occurred")}}},5998:function(e,t,r){"use strict";var a=r(7437),s=r(9235),o=r(7138),n=r(6463),c=r(2265),i=r(7918);t.default=()=>{let{login:e}=(0,c.useContext)(s.h),t=(0,n.useRouter)(),[r,u]=(0,c.useState)(""),[l,d]=(0,c.useState)(""),[h,g]=(0,c.useState)(""),f=async a=>{a.preventDefault();try{let{token:a}=await (0,i.x4)({email:r,password:l});e(a),t.push("/")}catch(e){e instanceof Error?g(e.message):g("An unknown error occurred.")}};return(0,a.jsx)("div",{className:"h-[90vh] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"md:w-2/6 p-4 rounded bg-gray-800",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold",children:"LogIn"}),h&&(0,a.jsx)("div",{className:"text-red-500",children:h}),(0,a.jsxs)("form",{onSubmit:f,children:[(0,a.jsx)("input",{type:"text",name:"email",placeholder:"Enter Email",value:r,onChange:e=>u(e.target.value),className:"bg-gray-700 px-3 py-2 my-3 w-full rounded"}),(0,a.jsx)("input",{type:"password",name:"password",placeholder:"Enter Password",value:l,onChange:e=>d(e.target.value),className:"bg-gray-700 px-3 py-2 my-3 w-full rounded"}),(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-400 px-3 py-2 rounded text-black font-semibold",children:"LogIn"}),(0,a.jsx)(o.default,{href:"./signup",className:"text-sm text-gray-400 hover:text-gray-200",children:"Don't have an account?"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-end",children:(0,a.jsx)(o.default,{href:"./forgot-password",className:"text-sm text-gray-400 hover:text-gray-200",children:"Forgot Password?"})})]})})}},9235:function(e,t,r){"use strict";r.d(t,{default:function(){return i},h:function(){return c}});var a=r(7437),s=r(2265),o=r(7918),n=r(5441);let c=(0,s.createContext)({inputDiv:"hidden",setInputDiv:()=>{},isLoggedIn:!1,setIsLoggedIn:()=>{},isLoading:!1,setIsLoading:()=>{},login:()=>{},logout:()=>{},tasks:[],setTasks:()=>{},tasksCount:0,setTasksCount:()=>{}});function i(e){let{children:t}=e,[r,i]=(0,s.useState)("hidden"),[u,l]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)([]),[v,m]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=localStorage.getItem("token");e&&(l(!0),p(e))},[]);let p=async e=>{try{let t=await (0,n.Ak)(e);f(t.data),m(t.count)}catch(e){console.error("Error fetching tasks:",e)}},y=async e=>{localStorage.setItem("token",e),l(!0),await p(e)},x=async()=>{let e=localStorage.getItem("token");if(e){try{await (0,o.kS)(e)}catch(e){console.error("Logout failed:",e.message)}localStorage.removeItem("token"),l(!1),f([])}};return(0,a.jsx)(c.Provider,{value:{inputDiv:r,setInputDiv:i,isLoggedIn:u,setIsLoggedIn:l,isLoading:d,setIsLoading:h,login:y,logout:x,tasks:g,setTasks:f,tasksCount:v,setTasksCount:m},children:t})}}},function(e){e.O(0,[472,291,971,23,744],function(){return e(e.s=2413)}),_N_E=e.O()}]);