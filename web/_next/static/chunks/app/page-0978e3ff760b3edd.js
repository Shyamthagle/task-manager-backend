(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7162:function(e,t,r){Promise.resolve().then(r.bind(r,25))},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},5441:function(e,t,r){"use strict";r.d(t,{Ak:function(){return o},_5:function(){return c},vr:function(){return n},xJ:function(){return l}});var s=r(8472);let a="http://13.201.88.151:8000",n=async(e,t)=>{try{return(await s.Z.post("".concat(a,"/task"),e,{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){var r,n;throw console.error("Create task error:",e),Error((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Create task failed")}},l=async(e,t)=>{try{return(await s.Z.put("".concat(a,"/task/").concat(e),t)).data}catch(e){var r,n;throw console.error("Update task error:",e),Error((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Update task failed")}},o=async e=>{try{return(await s.Z.get("".concat(a,"/task"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){var t,r;throw console.error("Get tasks error:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Get tasks failed")}},c=async e=>{try{await s.Z.delete("".concat(a,"/task/").concat(e))}catch(e){var t,r;throw console.error("Delete task error:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Delete task failed")}}},7918:function(e,t,r){"use strict";r.d(t,{IU:function(){return n},et:function(){return o},kS:function(){return c},x4:function(){return l}});var s=r(8472);let a="http://13.201.88.151:8000",n=async e=>{try{return(await s.Z.post("".concat(a,"/user/create"),e)).data}catch(e){throw Error(e.response.data.message)}},l=async e=>{try{return(await s.Z.post("".concat(a,"/user/login"),e)).data}catch(e){throw Error(e.response.data.message)}},o=async e=>{try{return(await s.Z.get("".concat(a,"/user/profile"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){throw Error(e.response.data.message)}},c=async e=>{try{await s.Z.get("".concat(a,"/user/logout"),{headers:{Authorization:"Bearer ".concat(e)}})}catch(e){if(s.Z.isAxiosError(e)&&e.response)throw Error(e.response.data.message);throw Error("An unexpected error occurred")}}},25:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var s=r(7437),a=r(2265),n=r(1942),l=r(9824),o=r(6356),c=e=>{let{isOpen:t,onClose:r,task:a}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"relative bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md h-auto max-h-[80vh]",children:[(0,s.jsxs)("div",{className:"overflow-y-auto pr-4 pb-10",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:a.title}),(0,s.jsx)("p",{className:"text-gray-300 mb-4",children:a.description})]}),(0,s.jsx)("button",{onClick:r,className:"absolute bottom-4 right-4 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-all",children:"Close"})]})}):null},i=r(9235),d=r(5441),u=r(7432),m=e=>{let{task:t,onSave:r,onCancel:n}=e,[l,o]=(0,a.useState)(t.title),[c,i]=(0,a.useState)(t.description),[m,x]=(0,a.useState)(t.completed),h=async()=>{try{let e={...t,title:l,description:c,completed:m};console.log("Updated task:",e);let s=await (0,d.xJ)(t._id,e);console.log("API response:",s);let a=s.data;r(a)}catch(e){console.error("Error updating task:",e)}};return(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-80 flex justify-center items-center h-screen w-full",children:(0,s.jsxs)("div",{className:"w-11/12 md:w-4/6 lg:w-3/6 bg-gray-900 p-4 rounded",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:n,children:(0,s.jsx)(u.$iT,{className:"text-2xl"})})}),(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Edit Task"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"px-3 py-2 rounded bg-gray-700 w-full my-3"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:c,onChange:e=>i(e.target.value),className:"px-3 py-2 rounded bg-gray-700 w-full my-3"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Status"}),(0,s.jsxs)("select",{value:m?"complete":"incomplete",onChange:e=>x("complete"===e.target.value),className:"px-3 py-2 rounded bg-gray-700 w-full my-3",children:[(0,s.jsx)("option",{value:"complete",children:"Complete"}),(0,s.jsx)("option",{value:"incomplete",children:"Incomplete"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{onClick:h,className:"bg-blue-500 text-white px-4 py-2 rounded mr-2",children:"Save"}),(0,s.jsx)("button",{onClick:n,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Cancel"})]})]})})},x=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-gray-700 h-6 mb-2 rounded"}),(0,s.jsx)("div",{className:"bg-gray-700 h-4 mb-2 rounded w-3/4"})]}),(0,s.jsxs)("div",{className:"mt-4 w-full flex items-center",children:[(0,s.jsx)("div",{className:"bg-gray-700 h-8 w-1/2 rounded"}),(0,s.jsxs)("div",{className:"text-white p-2 w-1/2 flex justify-around",children:[(0,s.jsx)("div",{className:"bg-gray-700 h-8 w-8 rounded"}),(0,s.jsx)("div",{className:"bg-gray-700 h-8 w-8 rounded"})]})]})]}),h=()=>{let{tasks:e,setTasks:t,setInputDiv:r,isLoading:u,setIsLoading:h,setTasksCount:f}=(0,a.useContext)(i.h),[p,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{h(!0);let e=await (0,d.Ak)();t(e.data)}catch(e){console.error("Error fetching tasks:",e)}finally{h(!1)}})()},[t,h]);let w=e=>{g(e),j(!0)},N=async e=>{try{let r=await (0,d.xJ)(e._id,{title:e.title,description:e.description,completed:e.completed});t(e=>e.map(e=>e._id===r.data._id?r.data:e)),b(!1),g(null)}catch(e){console.error("Error updating task:",e)}},k=e=>{g(e),b(!0)},C=async(e,r)=>{r.stopPropagation();try{await (0,d._5)(e._id),t(t=>t.filter(t=>t._id!==e._id)),f(e=>e-1)}catch(e){console.error("Error deleting task:",e)}};return(0,s.jsxs)("div",{className:"relative flex flex-col md:flex-row",children:[(0,s.jsxs)("div",{className:"flex-1 p-4 md:grid md:grid-cols-3 md:gap-4 mt-4",children:[u?Array.from({length:9}).map((e,t)=>(0,s.jsx)("div",{className:"relative mb:4 flex flex-col justify-between bg-gray-800 rounded-xl shadow-sm p-4 animate-pulse",children:(0,s.jsx)(x,{})},t)):0===e.length?(0,s.jsx)("div",{className:"col-span-3 text-center text-gray-400 p-4",children:"No tasks created yet"}):e.map(e=>(0,s.jsxs)("div",{className:"relative flex flex-col justify-between bg-gray-800 rounded-xl shadow-sm p-4 cursor-pointer mb-4 mt-2 md:mt-0",onClick:()=>w(e),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:e.title}),(0,s.jsx)("p",{className:"text-gray-300 my-2 line-clamp-3",children:e.description})]}),(0,s.jsxs)("div",{className:"mt-4 w-full flex items-center",children:[(0,s.jsx)("button",{className:"".concat(e.completed?"bg-green-800":"bg-red-400"," p-2 rounded w-3/6"),children:e.completed?"Complete":"Incomplete"}),(0,s.jsxs)("div",{className:"text-white p-2 w-3/6 text-2xl flex justify-around",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e)},children:(0,s.jsx)(n.fmQ,{className:"text-blue-400"})}),(0,s.jsx)("button",{onClick:t=>C(e,t),children:(0,s.jsx)(o.ZkW,{className:"text-red-400"})})]})]})]},e._id)),!u&&(0,s.jsxs)("button",{onClick:()=>r("fixed"),className:"w-full flex flex-col items-center justify-center bg-gray-800 rounded-xl p-4 text-gray-300 hover:scale-105 hover:cursor-pointer transition-all duration-300",children:[(0,s.jsx)(l.f8n,{className:"text-5xl"}),(0,s.jsx)("h1",{children:"Add Task"})]})]}),y&&!v&&p&&(0,s.jsx)(c,{isOpen:y,onClose:()=>{j(!1),g(null)},task:p}),v&&p&&(0,s.jsx)(m,{task:p,onSave:N,onCancel:()=>{b(!1),g(null)}})]})},f=r(6463),p=()=>{let{setInputDiv:e,inputDiv:t,setTasks:r,setTasksCount:n}=(0,a.useContext)(i.h),l=(0,f.useRouter)(),[o,c]=(0,a.useState)({title:"",description:"",completed:!0}),m=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))};async function x(){let t=localStorage.getItem("token");if(!t){console.error("No token found");return}try{let s=await (0,d.vr)(o,t);r(e=>[...e,s.data]),n(e=>e+1),e("hidden"),c({title:"",description:"",completed:!0}),l.push("/")}catch(e){console.error("Error creating task:",e)}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"".concat(t," top-0 left-0 bg-gray-800 opacity-80 h-screen w-full")}),(0,s.jsx)("div",{className:"".concat(t," top-0 left-0 flex items-center justify-center h-screen w-full"),children:(0,s.jsxs)("div",{className:"w-11/12 md:w-4/6 lg:w-2/6 bg-gray-900 p-4 rounded",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>e("hidden"),children:(0,s.jsx)(u.$iT,{className:"text-2xl"})})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x()},children:[(0,s.jsx)("input",{type:"text",placeholder:"Title",name:"title",value:o.title,onChange:m,className:"px-3 py-2 rounded bg-gray-700 w-full my-3"}),(0,s.jsx)("textarea",{name:"description",placeholder:"Enter Description....",cols:30,rows:10,value:o.description,onChange:m,className:"px-3 py-2 rounded bg-gray-700 w-full my-3"}),(0,s.jsx)("button",{type:"submit",className:"px-3 py-3 bg-blue-400 rounded text-black text-2xl font-semibold",children:"Submit"})]})]})})]})},g=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{}),(0,s.jsx)(p,{})]}),y=r(5027),j=r(7918),v=function(){let{setInputDiv:e,logout:t,tasksCount:r}=(0,a.useContext)(i.h),n=(0,f.useRouter)(),[c,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e&&(0,j.et)(e).then(e=>m(e.data)).catch(e=>console.error("Error fetching profile:",e.message))},[]);let x=async()=>{await t(),n.push("/login")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"md:hidden fixed top-2 left-2 p-2 cursor-pointer z-50",onClick:()=>d(!c),children:(0,s.jsx)(y.vHB,{className:"text-3xl text-gray-600"})}),(0,s.jsxs)("div",{className:"fixed top-2 left-2 h-[96vh] border-2 rounded-xl flex flex-col justify-between items-center bg-gray-800 md:bg-transparent lg:bg-transparent z-40 transition-transform duration-300 ease-in-out\n        ".concat(c?"w-64":"w-0 overflow-hidden"," md:w-64\n      "),children:[(0,s.jsxs)("div",{className:"flex flex-col items-center py-12",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-xl font-semibold",children:"Welcome ✌️"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:u?"".concat(u.firstName," ").concat(u.lastName):"User"}),(0,s.jsx)("h4",{className:"mb-1 text-gray-400",children:u?u.email:"user@gmail.com"}),(0,s.jsx)("hr",{className:"my-2"})]}),(0,s.jsx)("ul",{className:"flex flex-col items-center w-full",children:(0,s.jsxs)("li",{className:"my-2 flex items-center gap-2 p-2 rounded cursor-pointer transition-colors",children:[(0,s.jsx)(o.AU5,{}),"Total tasks "," ",": "," "," ",r]})}),(0,s.jsx)("div",{className:"flex justify-end items-center px-3 py-1 border-2 rounded-xl",children:(0,s.jsxs)("button",{onClick:()=>e("fixed"),className:"flex items-center",children:["Add Task",(0,s.jsx)(l.f8n,{className:"text-4xl text-gray-400 hover:text-gray-100 transition-all duration-300 ml-2"})]})})]}),(0,s.jsx)("div",{className:"mb-4 w-full flex justify-center p-2",children:(0,s.jsx)("button",{onClick:x,className:"bg-gray-600 w-full p-2 rounded text-white",children:"Log Out"})})]})]})},b=function(){let e=(0,f.useRouter)(),{isLoading:t,setIsLoading:r}=(0,a.useContext)(i.h);return((0,a.useEffect)(()=>{localStorage.getItem("token")?r(!1):e.push("/login")},[e]),t)?(0,s.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent border-solid rounded-full animate-spin"})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex h-screen",children:[(0,s.jsx)(v,{}),(0,s.jsx)("div",{className:"flex-1 p-4 overflow-y-auto sm:ml-16 md:ml-24 ml-2 lg:ml-64",children:(0,s.jsx)(g,{})})]})})}},9235:function(e,t,r){"use strict";r.d(t,{default:function(){return c},h:function(){return o}});var s=r(7437),a=r(2265),n=r(7918),l=r(5441);let o=(0,a.createContext)({inputDiv:"hidden",setInputDiv:()=>{},isLoggedIn:!1,setIsLoggedIn:()=>{},isLoading:!1,setIsLoading:()=>{},login:()=>{},logout:()=>{},tasks:[],setTasks:()=>{},tasksCount:0,setTasksCount:()=>{}});function c(e){let{children:t}=e,[r,c]=(0,a.useState)("hidden"),[i,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)([]),[f,p]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e&&(d(!0),g(e))},[]);let g=async e=>{try{let t=await (0,l.Ak)(e);h(t.data),p(t.count)}catch(e){console.error("Error fetching tasks:",e)}},y=async e=>{localStorage.setItem("token",e),d(!0),await g(e)},j=async()=>{let e=localStorage.getItem("token");if(e){try{await (0,n.kS)(e)}catch(e){console.error("Logout failed:",e.message)}localStorage.removeItem("token"),d(!1),h([])}};return(0,s.jsx)(o.Provider,{value:{inputDiv:r,setInputDiv:c,isLoggedIn:i,setIsLoggedIn:d,isLoading:u,setIsLoading:m,login:y,logout:j,tasks:x,setTasks:h,tasksCount:f,setTasksCount:p},children:t})}},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var s=r(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,o({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,i({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:n,title:c}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,l),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:i(i({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[574,51,452,505,699,472,971,23,744],function(){return e(e.s=7162)}),_N_E=e.O()}]);